# tmsRouter

Класс, позволяющий реализовать простую маршрутизацию по сайту. 

Самое первое обращение к роутеру производятся через 
```php
$router = tmsRouter::getInstance('/root/path/to/your/routing.yml', '/root/path/to/your/routingCache.php');
```
далее обращения выглядят либо через объект роутера $router либо  кратко
```php
$router = tmsRouter::getInstance();
```

В качестве аргументов используются пути к файлу настроек маршрутов и файлу кэша маршрутов.
В случае, если существует кэш маршрутов, чтение производится только из него.
Если кэша маршрутов нет, то производится чтение из файла настроек маршрутов. При этом создается кэшь маршрутов (если задан путь)

Наличие кэша позволяет значительно ускорить рамоту роутера, т к в нем содержится исполняемый код, который не требуется парсить.

## Файл настроек маршрутов

В файле описываются все возможные маршруты. Обработка производится сверху вниз. 
Каждый маршрут состоит из имени (home, testrout, default), url (/, /testpath) и параметров обработчика запроса params.
Если с первыми двумя все достаточно понятно, то params следует пояснить. Т к не все продукты используют одинаковую парадигму контроллеров запросов (у кого-то модули, у кого-то бандлы, где-то просто функции вызываются...) то в переменной params можно описывать все необходимые компоненты, по которым у вас получится вызвать требуемы обработчик запроса.

В описанной схеме присутствует только один маршрут без url. Это маршрут по умолчанию default - маршрут который следует вызвать если не подошел ни один из выше перечисленных. 

```yml
home:
  url: /
  params: { action: homePage}
testrout:
  url: /testpath
  params: { action: getTest}
default:
  params: { action: default}
```

## Работа с маршрутами

Для того чтобы понять, какой блок системы должен обработать пришедший запрос, нужно произвести сопоставление текущего url атрибуту params маршрутов. Производится это просто:

```php
$params = $router->findRoute();
```

В результате в переменной $params должны быть соответствующая информация из файла настроек маршрутов или NULL.


Для вставки нушного url именованного маршрута в шаблоне страницы требуется вызвать:
```php
$params = $router->getRoute('route_name');
```

Для быстрого доступа к params маршрута по умолчанию можно вызвать 
```php
$params = $router->findDefaultRoute();
```

